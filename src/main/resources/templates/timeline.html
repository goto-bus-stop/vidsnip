<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head th:include="layout :: head (Timeline)"></head>
<body>
    <nav th:replace="layout :: navigation" />
    <main class="container-fluid">
        <aside class="col-sm-3">
            <p th:text="'Hello, ' + ${user.realName} + '!'" />
        </aside>
        <div class="col-sm-9">
            <th:block th:each="snip : ${snips}">
                <div th:replace="fragments/snip :: snip (${snip})"></div>
            </th:block>
        </div>
    </main>

    <script>
        // TODO Move to a separate JavaScript file.
        function $ (sel, map) {
            return [].map.call(document.querySelectorAll(sel), map || Object)
        }

        window.onYouTubeIframeAPIReady = function () {
            $('[data-hook*="embed"]', function (embed) {
                var videoId = embed.dataset.videoId
                var start = embed.dataset.start
                var end = embed.dataset.end
                new YT.Player(embed, {
                    height: '360',
                    width: '640',
                    videoId: videoId,
                    playerVars: {
                      start: start,
                      end: end
                    }
                })
            })
        }
    </script>
    <script src="https://www.youtube.com/iframe_api"></script>
</body>
</html>
